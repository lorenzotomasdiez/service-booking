---
name: Documentation & Training Materials
status: open
created: 2025-10-10T11:16:30Z
updated: 2025-10-10T13:33:50Z
github: https://github.com/lorenzotomasdiez/service-booking/issues/10
depends_on: [2, 3, 9]
parallel: false
conflicts_with: []
---

# Task: Documentation & Training Materials

## Description

Create comprehensive documentation for the local Docker environment, including setup guide, architecture overview, troubleshooting guide, Makefile cheat sheet, and training materials. The goal is to enable any new developer to get started in under 15 minutes and have reference documentation for common tasks and issues.

**Goal**: Complete, user-friendly documentation that makes the Docker environment accessible to all team members.

## Acceptance Criteria

**Core Documentation**:
- [ ] `docker/README.md` - Main Docker documentation hub
- [ ] `docs/docker-setup-guide.md` - Step-by-step setup instructions
- [ ] `docs/docker-architecture.md` - System architecture and design decisions
- [ ] `docs/docker-troubleshooting.md` - Common issues and solutions
- [ ] `docs/makefile-cheat-sheet.md` - Quick reference for all make commands
- [ ] `docker/mocks/README.md` - Mock services documentation (already in Task 7)
- [ ] `docker/monitoring/README.md` - Monitoring stack documentation (already in Task 8)

**Training Materials**:
- [ ] Quick start video walkthrough (5-10 min screencast) - optional
- [ ] Architecture diagram (visual overview of services and connections)
- [ ] Developer onboarding checklist
- [ ] FAQ document

**Additional Resources**:
- [ ] `.env.example` comprehensively documented with inline comments
- [ ] Changelog for Docker environment updates
- [ ] Migration guide from old setup to new Docker structure

## Technical Details

**docker/README.md** (Main Hub):
```markdown
# BarberPro Docker Environment

Local development environment with Docker Compose.

## Quick Start

```bash
# One-time setup
npm run setup:dev

# Start development environment
make up

# Stop environment
make down

# Reset environment (fresh start)
make reset
```

Access services:
- Frontend: http://localhost:5173
- Backend: http://localhost:3000
- Database UI: http://localhost:8080
- Grafana: http://localhost:3001

## Documentation

- [Setup Guide](../docs/docker-setup-guide.md) - Detailed setup instructions
- [Architecture](../docs/docker-architecture.md) - System overview
- [Troubleshooting](../docs/docker-troubleshooting.md) - Common issues
- [Makefile Commands](../docs/makefile-cheat-sheet.md) - Command reference
- [Mock Services](./mocks/README.md) - Argentina mocks
- [Monitoring](./monitoring/README.md) - Observability stack

## Requirements

- Docker Desktop 20.10+ or Docker Engine
- Docker Compose V2
- 8GB RAM, 20GB disk space
- Ports available: 3000, 5173, 5432, 6379, 8080, 3001-3004, 8025

## Support

- Issues: [GitHub Issues](https://github.com/your-org/barberpro/issues)
- Questions: #dev-environment Slack channel
- Documentation: /docs directory
```

**docs/docker-setup-guide.md** (Detailed Setup):
```markdown
# Docker Environment Setup Guide

Complete guide to setting up the BarberPro Docker development environment.

## Prerequisites

### 1. Install Docker

**macOS**:
- Download Docker Desktop: https://www.docker.com/products/docker-desktop
- Install and start Docker Desktop
- Verify: `docker --version` and `docker-compose --version`

**Linux (Ubuntu/Debian)**:
```bash
sudo apt-get update
sudo apt-get install docker.io docker-compose
sudo usermod -aG docker $USER
# Log out and back in
docker --version
```

**Windows (WSL2)**:
- Install WSL2: https://docs.microsoft.com/en-us/windows/wsl/install
- Install Docker Desktop for Windows with WSL2 backend
- Verify in WSL2 terminal: `docker --version`

### 2. System Requirements

- CPU: 4+ cores recommended
- RAM: 8GB minimum, 16GB recommended
- Disk: 20GB free space
- Ports: 3000, 5173, 5432, 6379, 8080, 3001-3004, 8025

### 3. Check Port Availability

```bash
# Check if required ports are free
lsof -i :5432  # PostgreSQL
lsof -i :6379  # Redis
lsof -i :3000  # Backend
lsof -i :5173  # Frontend
```

If ports are in use, stop conflicting services or update `.env` with alternative ports.

## Setup Steps

### Step 1: Clone Repository

```bash
git clone https://github.com/your-org/barberpro.git
cd barberpro
```

### Step 2: Run Automated Setup

```bash
npm run setup:dev
```

This command:
1. Installs all dependencies (frontend + backend)
2. Generates Prisma client
3. Pulls Docker images
4. Starts Docker services
5. Runs database migrations
6. Seeds test data
7. Validates health checks

**Expected output**:
```
✓ Dependencies installed
✓ Prisma client generated
✓ Docker images pulled
✓ Services started
✓ Migrations applied
✓ Test data seeded
✓ Health checks passed
Environment ready! ✨
```

### Step 3: Verify Installation

```bash
# Check service status
make status

# Access frontend
open http://localhost:5173

# Access backend API docs
open http://localhost:3000/docs

# Check logs
make logs
```

### Step 4: Test Complete Workflow

1. Open frontend: http://localhost:5173
2. Create test booking
3. Process payment (MercadoPago mock)
4. Check email in MailHog: http://localhost:8025
5. View WhatsApp messages: http://localhost:3003/dashboard

## Troubleshooting

See [Troubleshooting Guide](./docker-troubleshooting.md) for common issues.

## Next Steps

- Read [Architecture Overview](./docker-architecture.md)
- Review [Makefile Commands](./makefile-cheat-sheet.md)
- Join #dev-environment on Slack
```

**docs/docker-troubleshooting.md** (Common Issues):
```markdown
# Docker Environment Troubleshooting

Common issues and solutions.

## Services Won't Start

### Issue: Port Already in Use
```
Error: Bind for 0.0.0.0:5432 failed: port is already allocated
```

**Solution**:
```bash
# Find process using port
lsof -ti:5432

# Kill process
kill -9 <PID>

# Or change port in .env
POSTGRES_PORT=5433
```

### Issue: Docker Not Running
```
Error: Cannot connect to the Docker daemon
```

**Solution**:
- Start Docker Desktop (macOS/Windows)
- Start Docker service: `sudo systemctl start docker` (Linux)
- Verify: `docker info`

## Performance Issues

### Issue: Slow Startup

**Solutions**:
1. Increase Docker resources in Docker Desktop settings
2. Use lightweight dev mode: `make dev` (only postgres + redis)
3. Prune unused images: `make prune`
4. Stop monitoring stack if running: `make monitoring-down`

### Issue: High Memory Usage

**Check usage**:
```bash
make stats
```

**Solutions**:
- Stop unused services: `make mocks-down`, `make monitoring-down`
- Increase Docker memory limit in settings
- Use `make dev` instead of `make full`

## Connection Issues

### Issue: Backend Can't Connect to Database

**Check**:
```bash
make logs-backend
# Look for: "Connection refused" or "ECONNREFUSED"
```

**Solutions**:
1. Wait for postgres to be healthy: `make status`
2. Check DATABASE_URL uses service name:
   - ✅ `postgresql://user:pass@postgres:5432/db`
   - ❌ `postgresql://user:pass@localhost:5432/db`
3. Restart backend: `make restart-backend`

### Issue: CORS Errors in Frontend

**Check browser console**:
```
Access to fetch at 'http://localhost:3000' from origin 'http://localhost:5173' has been blocked by CORS
```

**Solutions**:
1. Check CORS_ORIGIN in backend `.env`:
   ```
   CORS_ORIGIN=http://localhost:5173,http://frontend:5173
   ```
2. Restart backend: `make restart-backend`
3. Clear browser cache

## Migration/Database Issues

### Issue: Migrations Fail

```bash
# View migration status
make db-migrate

# Reset database completely
make db-reset
```

### Issue: Seed Data Missing

```bash
# Re-run seed
make db-seed

# Or full reset
make reset
```

## Mock Service Issues

### Issue: Mocks Not Responding

**Check health**:
```bash
curl http://localhost:3001/health  # MercadoPago
curl http://localhost:3002/health  # AFIP
curl http://localhost:3003/health  # WhatsApp
curl http://localhost:3004/health  # SMS
```

**Solutions**:
1. Restart mocks: `make mocks-down && make mocks`
2. Check logs: `make mocks-logs`
3. Rebuild: `make rebuild`

## Reset Strategies

### Soft Reset (Keep Images)
```bash
make reset
```

### Hard Reset (Remove Everything)
```bash
make clean
make up
```

### Nuclear Option (Complete Rebuild)
```bash
make down
docker system prune -a --volumes
make rebuild
```

## Getting Help

1. Check logs: `make logs` or `make logs-<service>`
2. Check health: `make status`
3. Search docs: `/docs` directory
4. Ask in #dev-environment Slack
5. Create GitHub issue with logs
```

**docs/makefile-cheat-sheet.md** (Quick Reference):
```markdown
# Makefile Command Reference

Quick reference for all Docker environment commands.

## Essential Commands

```bash
make help          # Show all commands
make up            # Start everything
make down          # Stop everything
make restart       # Restart all services
make reset         # Fresh start (stop, clean, start, seed)
make status        # Show health of all services
make logs          # View all logs
```

## Environment Variants

```bash
make dev           # Start dev only (postgres, redis)
make full          # Start everything (dev + monitoring + mocks)
make monitoring    # Start monitoring stack
make mocks         # Start Argentina mocks
make test          # Start test environment
```

## Database Operations

```bash
make db-migrate    # Run Prisma migrations
make db-seed       # Seed test data
make db-reset      # Drop, migrate, seed
make db-backup     # Backup to file
make db-restore    # Restore from backup
make db-shell      # Open PostgreSQL shell
```

## Monitoring & Debugging

```bash
make logs          # All logs
make logs-backend  # Backend logs only
make logs-frontend # Frontend logs only
make ps            # List containers
make stats         # Resource usage
make health        # Run health checks
make status        # Service status table
```

## Service Control

```bash
make start-postgres    # Start specific service
make stop-postgres     # Stop specific service
make restart-postgres  # Restart specific service
make shell-backend     # Open shell in container
```

## Maintenance

```bash
make clean         # Remove containers and volumes
make prune         # Remove unused Docker resources
make update        # Pull latest images
make rebuild       # Rebuild all services
make validate      # Validate compose files
```

## Quick Workflows

### First time setup:
```bash
npm run setup:dev
```

### Daily workflow:
```bash
make up      # Start day
make logs    # Check logs
make down    # End day
```

### Switch branches:
```bash
make reset   # Fresh environment
```

### Debug issue:
```bash
make status           # Check health
make logs-backend     # View logs
make shell-backend    # Debug in container
```

### Test mocks:
```bash
make mocks           # Start mocks
make mocks-logs      # View logs
open http://localhost:3001/dashboard  # MercadoPago
```
```

**Developer Onboarding Checklist**:
```markdown
# Developer Onboarding Checklist

Welcome to BarberPro! Complete this checklist to get set up.

## Pre-Setup
- [ ] Docker Desktop installed
- [ ] Git installed
- [ ] Node.js 20+ installed
- [ ] Repository cloned
- [ ] Added to GitHub team
- [ ] Added to Slack channels (#dev-environment, #engineering)

## Initial Setup (First Day)
- [ ] Read [Setup Guide](./docker-setup-guide.md)
- [ ] Run `npm run setup:dev`
- [ ] Verify all services healthy: `make status`
- [ ] Access frontend: http://localhost:5173
- [ ] Access backend docs: http://localhost:3000/docs
- [ ] Test creating a booking
- [ ] Check mock services dashboards
- [ ] Review [Architecture](./docker-architecture.md)

## Learning (First Week)
- [ ] Read [Makefile Cheat Sheet](./makefile-cheat-sheet.md)
- [ ] Practice common workflows (reset, logs, shell)
- [ ] Run integration tests
- [ ] Review [Troubleshooting Guide](./docker-troubleshooting.md)
- [ ] Join team standup
- [ ] Pair with team member on first task

## Validation
- [ ] Can start environment independently
- [ ] Can debug issues using logs and status
- [ ] Know where to find documentation
- [ ] Know where to ask for help

Welcome to the team! 🎉
```

## Dependencies

- [ ] Task 2 completed (Docker structure)
- [ ] Task 3 completed (Makefile)
- [ ] Task 9 completed (Integration testing)
- [ ] All core features working

## Effort Estimate

- **Size**: M
- **Hours**: 8-10 hours
- **Parallel**: false (needs working environment to document)

**Breakdown**:
- Main documentation: 3-4 hours
- Troubleshooting guide: 2-3 hours
- Training materials: 2 hours
- Review and polish: 2 hours
- Video walkthrough (optional): 1-2 hours

## Definition of Done

- [ ] All documentation files created
- [ ] Architecture diagram created (can use tools like draw.io, mermaid)
- [ ] Developer onboarding checklist complete
- [ ] FAQ covers common questions
- [ ] Troubleshooting guide tested with actual issues
- [ ] `.env.example` fully documented
- [ ] Documentation reviewed by 2+ team members
- [ ] Training session conducted with team
- [ ] Feedback incorporated
- [ ] All docs committed to repository

## Notes

**Documentation Principles**:
- Write for new developers (assume no Docker knowledge)
- Include examples and screenshots
- Test all commands before documenting
- Keep it up to date (link to Changelog)
- Make it searchable (good heading structure)

**Optional Enhancements**:
- Video walkthrough (screencast)
- Interactive tutorial
- Troubleshooting flowchart
- Performance tuning guide

**Maintenance**:
- Update docs when changing Docker setup
- Add new issues to troubleshooting guide
- Collect FAQ from team questions
- Review quarterly for accuracy
