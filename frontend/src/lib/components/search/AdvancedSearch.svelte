<!-- AdvancedSearch.svelte - Enhanced search with real-time results for Argentina mobile users -->
<script lang="ts">
  import { createEventDispatcher, onMount, onDestroy } from 'svelte';
  import { browser } from '$app/environment';
  import { debounce } from '$lib/utils/debounce';
  import { connectionSpeed, shouldUseSkeletons } from '$lib/services/ux-optimization';
  import { uxAnalyticsService } from '$lib/services/ux-analytics';
  import LazyImage from '../performance/LazyImage.svelte';
  import MicroInteractions from '../ux/MicroInteractions.svelte';\n  \n  interface SearchResult {\n    id: string;\n    type: 'provider' | 'service' | 'location';\n    title: string;\n    subtitle?: string;\n    description?: string;\n    image?: string;\n    rating?: number;\n    price?: number;\n    distance?: number;\n    availability?: 'available' | 'busy' | 'offline';\n    tags?: string[];\n    isVerified?: boolean;\n    isPromoted?: boolean;\n    verticalType?: 'barber' | 'psychology' | 'medical' | 'beauty' | 'fitness';\n  }\n  \n  interface SearchFilters {\n    location?: string;\n    radius?: number;\n    priceRange?: [number, number];\n    rating?: number;\n    availability?: string;\n    services?: string[];\n    sortBy?: 'relevance' | 'rating' | 'price' | 'distance' | 'availability';\n    vertical?: string;\n  }\n  \n  // Props\n  export let placeholder = 'Buscar servicios, profesionales...';\n  export let initialQuery = '';\n  export let initialFilters: SearchFilters = {};\n  export let showFilters = true;\n  export let maxResults = 20;\n  export let enableVoiceSearch = true;\n  export let enableBarcode = false; // For future QR code scanning\n  \n  const dispatch = createEventDispatcher<{\n    search: { query: string; filters: SearchFilters; timestamp: number };\n    select: { result: SearchResult; query: string };\n    filter: { filters: SearchFilters };\n    clear: { timestamp: number };\n  }>();\n  \n  // State\n  let query = initialQuery;\n  let filters: SearchFilters = { ...initialFilters };\n  let results: SearchResult[] = [];\n  let isSearching = false;\n  let showResults = false;\n  let selectedIndex = -1;\n  let searchInput: HTMLInputElement;\n  let searchContainer: HTMLElement;\n  let voiceRecognition: any = null;\n  let isListening = false;\n  let searchStartTime = 0;\n  \n  // Search performance optimization for Argentina mobile\n  $: searchDelay = $connectionSpeed === 'slow' ? 800 : $connectionSpeed === 'medium' ? 500 : 300;\n  $: shouldShowSkeletons = $shouldUseSkeletons && isSearching;\n  \n  // Debounced search function\n  const debouncedSearch = debounce(performSearch, searchDelay);\n  \n  onMount(() => {\n    // Initialize voice search for Argentina Spanish\n    if (enableVoiceSearch && 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = (window as any).webkitSpeechRecognition || (window as any).SpeechRecognition;\n      voiceRecognition = new SpeechRecognition();\n      voiceRecognition.lang = 'es-AR'; // Argentina Spanish\n      voiceRecognition.continuous = false;\n      voiceRecognition.interimResults = false;\n      \n      voiceRecognition.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        query = transcript;\n        handleSearch();\n        uxAnalyticsService.trackEvent('voice_search', { query: transcript, confidence: event.results[0][0].confidence });\n      };\n      \n      voiceRecognition.onend = () => {\n        isListening = false;\n      };\n      \n      voiceRecognition.onerror = (event: any) => {\n        console.warn('[AdvancedSearch] Voice recognition error:', event.error);\n        isListening = false;\n      };\n    }\n    \n    // Handle clicks outside to close results\n    const handleClickOutside = (event: Event) => {\n      if (searchContainer && !searchContainer.contains(event.target as Node)) {\n        showResults = false;\n      }\n    };\n    \n    document.addEventListener('click', handleClickOutside);\n    \n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n      if (voiceRecognition) {\n        voiceRecognition.abort();\n      }\n    };\n  });\n  \n  async function performSearch() {\n    if (!query.trim() && Object.keys(filters).length === 0) {\n      results = [];\n      showResults = false;\n      return;\n    }\n    \n    isSearching = true;\n    searchStartTime = Date.now();\n    \n    try {\n      // Simulate API call with realistic Argentina mobile latency\n      const delay = $connectionSpeed === 'slow' ? 1200 : $connectionSpeed === 'medium' ? 600 : 300;\n      \n      await new Promise(resolve => setTimeout(resolve, delay));\n      \n      // Mock search results (in real app, this would be an API call)\n      const mockResults: SearchResult[] = [\n        {\n          id: '1',\n          type: 'provider',\n          title: 'Barber√≠a El Corte',\n          subtitle: 'Barber√≠a tradicional',\n          description: 'Cortes cl√°sicos y modernos en Palermo',\n          image: '/images/providers/barberia-1.jpg',\n          rating: 4.8,\n          price: 1500,\n          distance: 0.5,\n          availability: 'available',\n          tags: ['corte', 'barba', 'tradicional'],\n          isVerified: true,\n          verticalType: 'barber'\n        },\n        {\n          id: '2',\n          type: 'provider',\n          title: 'Psic√≥loga Mar√≠a Gonz√°lez',\n          subtitle: 'Psicolog√≠a cognitiva',\n          description: 'Terapia individual y de pareja',\n          image: '/images/providers/psicologa-1.jpg',\n          rating: 4.9,\n          price: 3000,\n          distance: 1.2,\n          availability: 'busy',\n          tags: ['terapia', 'pareja', 'ansiedad'],\n          isVerified: true,\n          verticalType: 'psychology'\n        },\n        {\n          id: '3',\n          type: 'service',\n          title: 'Corte + Barba',\n          subtitle: 'Servicio premium',\n          description: 'Incluye lavado y peinado',\n          price: 2000,\n          tags: ['premium', 'completo'],\n          verticalType: 'barber'\n        }\n      ];\n      \n      // Filter results based on query and filters\n      results = mockResults.filter(result => {\n        const matchesQuery = !query.trim() || \n          result.title.toLowerCase().includes(query.toLowerCase()) ||\n          result.description?.toLowerCase().includes(query.toLowerCase()) ||\n          result.tags?.some(tag => tag.toLowerCase().includes(query.toLowerCase()));\n        \n        const matchesVertical = !filters.vertical || result.verticalType === filters.vertical;\n        const matchesRating = !filters.rating || (result.rating && result.rating >= filters.rating);\n        const matchesAvailability = !filters.availability || result.availability === filters.availability;\n        \n        return matchesQuery && matchesVertical && matchesRating && matchesAvailability;\n      });\n      \n      // Sort results\n      if (filters.sortBy) {\n        results.sort((a, b) => {\n          switch (filters.sortBy) {\n            case 'rating':\n              return (b.rating || 0) - (a.rating || 0);\n            case 'price':\n              return (a.price || 0) - (b.price || 0);\n            case 'distance':\n              return (a.distance || 0) - (b.distance || 0);\n            default:\n              return 0;\n          }\n        });\n      }\n      \n      results = results.slice(0, maxResults);\n      showResults = true;\n      \n      const searchDuration = Date.now() - searchStartTime;\n      \n      // Track search analytics\n      uxAnalyticsService.trackEvent('search_performed', {\n        query: query.trim(),\n        filters,\n        resultCount: results.length,\n        duration: searchDuration,\n        connectionSpeed: $connectionSpeed\n      });\n      \n      dispatch('search', { query: query.trim(), filters, timestamp: Date.now() });\n      \n    } catch (error) {\n      console.error('[AdvancedSearch] Search error:', error);\n      results = [];\n    } finally {\n      isSearching = false;\n    }\n  }\n  \n  function handleSearch() {\n    selectedIndex = -1;\n    debouncedSearch();\n  }\n  \n  function handleInputChange(event: Event) {\n    const target = event.target as HTMLInputElement;\n    query = target.value;\n    handleSearch();\n  }\n  \n  function handleKeyDown(event: KeyboardEvent) {\n    if (!showResults) return;\n    \n    switch (event.key) {\n      case 'ArrowDown':\n        event.preventDefault();\n        selectedIndex = Math.min(selectedIndex + 1, results.length - 1);\n        break;\n      case 'ArrowUp':\n        event.preventDefault();\n        selectedIndex = Math.max(selectedIndex - 1, -1);\n        break;\n      case 'Enter':\n        event.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < results.length) {\n          selectResult(results[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        showResults = false;\n        selectedIndex = -1;\n        searchInput.blur();\n        break;\n    }\n  }\n  \n  function selectResult(result: SearchResult) {\n    query = result.title;\n    showResults = false;\n    selectedIndex = -1;\n    \n    // Track result selection\n    uxAnalyticsService.trackEvent('search_result_selected', {\n      resultId: result.id,\n      resultType: result.type,\n      position: results.indexOf(result),\n      query: query.trim()\n    });\n    \n    dispatch('select', { result, query: query.trim() });\n  }\n  \n  function clearSearch() {\n    query = '';\n    results = [];\n    showResults = false;\n    selectedIndex = -1;\n    searchInput.focus();\n    \n    dispatch('clear', { timestamp: Date.now() });\n  }\n  \n  function startVoiceSearch() {\n    if (!voiceRecognition || isListening) return;\n    \n    isListening = true;\n    voiceRecognition.start();\n    \n    uxAnalyticsService.trackEvent('voice_search_started', { timestamp: Date.now() });\n  }\n  \n  function updateFilters(newFilters: Partial<SearchFilters>) {\n    filters = { ...filters, ...newFilters };\n    handleSearch();\n    dispatch('filter', { filters });\n  }\n  \n  function getResultIcon(result: SearchResult) {\n    switch (result.type) {\n      case 'provider':\n        return 'üë§';\n      case 'service':\n        return '‚úÇÔ∏è';\n      case 'location':\n        return 'üìç';\n      default:\n        return 'üîç';\n    }\n  }\n  \n  function formatPrice(price: number) {\n    return new Intl.NumberFormat('es-AR', {\n      style: 'currency',\n      currency: 'ARS',\n      minimumFractionDigits: 0\n    }).format(price);\n  }\n  \n  function formatDistance(distance: number) {\n    if (distance < 1) {\n      return `${Math.round(distance * 1000)}m`;\n    }\n    return `${distance.toFixed(1)}km`;\n  }\n</script>\n\n<div class=\"advanced-search\" bind:this={searchContainer}>\n  <!-- Search input -->\n  <div class=\"search-input-container\">\n    <div class=\"search-input-wrapper\">\n      <svg class=\"search-icon\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n      </svg>\n      \n      <input\n        bind:this={searchInput}\n        type=\"text\"\n        {placeholder}\n        bind:value={query}\n        on:input={handleInputChange}\n        on:keydown={handleKeyDown}\n        on:focus={() => showResults = results.length > 0}\n        class=\"search-input\"\n        autocomplete=\"off\"\n        spellcheck=\"false\"\n        inputmode=\"search\"\n      />\n      \n      {#if query}\n        <MicroInteractions config={{ type: 'button', variant: 'subtle', hapticFeedback: true }}>\n          <button\n            type=\"button\"\n            class=\"clear-button\"\n            on:click={clearSearch}\n            aria-label=\"Limpiar b√∫squeda\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </MicroInteractions>\n      {/if}\n      \n      {#if enableVoiceSearch && voiceRecognition}\n        <MicroInteractions config={{ type: 'button', variant: 'subtle', hapticFeedback: true, argentina: true }}>\n          <button\n            type=\"button\"\n            class=\"voice-button\"\n            class:listening={isListening}\n            on:click={startVoiceSearch}\n            aria-label=\"B√∫squeda por voz\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n            </svg>\n          </button>\n        </MicroInteractions>\n      {/if}\n      \n      {#if isSearching}\n        <div class=\"search-loading\">\n          <div class=\"search-spinner\"></div>\n        </div>\n      {/if}\n    </div>\n  </div>\n  \n  <!-- Quick filters -->\n  {#if showFilters}\n    <div class=\"quick-filters\">\n      <div class=\"filter-scroll\">\n        <MicroInteractions config={{ type: 'toggle', variant: 'subtle' }}>\n          <button\n            class=\"filter-chip\"\n            class:active={filters.vertical === 'barber'}\n            on:click={() => updateFilters({ vertical: filters.vertical === 'barber' ? undefined : 'barber' })}\n          >\n            ‚úÇÔ∏è Barber√≠a\n          </button>\n        </MicroInteractions>\n        \n        <MicroInteractions config={{ type: 'toggle', variant: 'subtle' }}>\n          <button\n            class=\"filter-chip\"\n            class:active={filters.vertical === 'psychology'}\n            on:click={() => updateFilters({ vertical: filters.vertical === 'psychology' ? undefined : 'psychology' })}\n          >\n            üß† Psicolog√≠a\n          </button>\n        </MicroInteractions>\n        \n        <MicroInteractions config={{ type: 'toggle', variant: 'subtle' }}>\n          <button\n            class=\"filter-chip\"\n            class:active={filters.availability === 'available'}\n            on:click={() => updateFilters({ availability: filters.availability === 'available' ? undefined : 'available' })}\n          >\n            üü¢ Disponible\n          </button>\n        </MicroInteractions>\n        \n        <MicroInteractions config={{ type: 'toggle', variant: 'subtle' }}>\n          <button\n            class=\"filter-chip\"\n            class:active={filters.rating === 4.5}\n            on:click={() => updateFilters({ rating: filters.rating === 4.5 ? undefined : 4.5 })}\n          >\n            ‚≠ê 4.5+\n          </button>\n        </MicroInteractions>\n      </div>\n    </div>\n  {/if}\n  \n  <!-- Search results -->\n  {#if showResults}\n    <div class=\"search-results\">\n      {#if shouldShowSkeletons}\n        <!-- Loading skeletons -->\n        {#each Array(3) as _, i}\n          <div class=\"result-skeleton\">\n            <div class=\"skeleton skeleton-avatar\"></div>\n            <div class=\"skeleton-content\">\n              <div class=\"skeleton skeleton-title\"></div>\n              <div class=\"skeleton skeleton-subtitle\"></div>\n              <div class=\"skeleton skeleton-meta\"></div>\n            </div>\n          </div>\n        {/each}\n      {:else if results.length > 0}\n        <!-- Search results -->\n        {#each results as result, index}\n          <MicroInteractions config={{ type: 'card', variant: 'subtle', hapticFeedback: true }}>\n            <div\n              class=\"search-result\"\n              class:selected={index === selectedIndex}\n              class:promoted={result.isPromoted}\n              on:click={() => selectResult(result)}\n              role=\"button\"\n              tabindex=\"0\"\n              on:keydown={(e) => e.key === 'Enter' && selectResult(result)}\n            >\n              <div class=\"result-icon\">\n                {#if result.image}\n                  <LazyImage\n                    src={result.image}\n                    alt={result.title}\n                    width={48}\n                    height={48}\n                    class=\"result-avatar\"\n                    quality=\"medium\"\n                  />\n                {:else}\n                  <div class=\"result-emoji\">{getResultIcon(result)}</div>\n                {/if}\n              </div>\n              \n              <div class=\"result-content\">\n                <div class=\"result-header\">\n                  <h3 class=\"result-title\">\n                    {result.title}\n                    {#if result.isVerified}\n                      <svg class=\"verified-badge\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                    {/if}\n                  </h3>\n                  \n                  {#if result.rating}\n                    <div class=\"result-rating\">\n                      <span class=\"rating-value\">{result.rating}</span>\n                      <svg class=\"rating-star\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                      </svg>\n                    </div>\n                  {/if}\n                </div>\n                \n                {#if result.subtitle}\n                  <p class=\"result-subtitle\">{result.subtitle}</p>\n                {/if}\n                \n                {#if result.description}\n                  <p class=\"result-description\">{result.description}</p>\n                {/if}\n                \n                <div class=\"result-meta\">\n                  {#if result.price}\n                    <span class=\"result-price\">{formatPrice(result.price)}</span>\n                  {/if}\n                  \n                  {#if result.distance !== undefined}\n                    <span class=\"result-distance\">üìç {formatDistance(result.distance)}</span>\n                  {/if}\n                  \n                  {#if result.availability}\n                    <span class=\"result-availability availability-{result.availability}\">\n                      {#if result.availability === 'available'}\n                        üü¢ Disponible\n                      {:else if result.availability === 'busy'}\n                        üü° Ocupado\n                      {:else}\n                        üî¥ No disponible\n                      {/if}\n                    </span>\n                  {/if}\n                </div>\n              </div>\n            </div>\n          </MicroInteractions>\n        {/each}\n      {:else if !isSearching}\n        <!-- No results -->\n        <div class=\"no-results\">\n          <div class=\"no-results-icon\">üîç</div>\n          <h3 class=\"no-results-title\">No se encontraron resultados</h3>\n          <p class=\"no-results-message\">\n            Intenta con otros t√©rminos de b√∫squeda o ajusta los filtros.\n          </p>\n        </div>\n      {/if}\n    </div>\n  {/if}\n</div>\n\n<style>\n  .advanced-search {\n    position: relative;\n    width: 100%;\n    max-width: 600px;\n    margin: 0 auto;\n  }\n  \n  /* Search input */\n  .search-input-container {\n    position: relative;\n    margin-bottom: 1rem;\n  }\n  \n  .search-input-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n    background: #ffffff;\n    border: 2px solid #e5e7eb;\n    border-radius: 12px;\n    padding: 0.75rem 1rem;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    transition: all 0.2s ease;\n  }\n  \n  .search-input-wrapper:focus-within {\n    border-color: #2563eb;\n    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1), 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n  \n  .search-icon {\n    width: 1.25rem;\n    height: 1.25rem;\n    color: #6b7280;\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n  }\n  \n  .search-input {\n    flex: 1;\n    border: none;\n    outline: none;\n    font-size: 1rem;\n    color: #111827;\n    background: transparent;\n    min-height: 24px;\n  }\n  \n  .search-input::placeholder {\n    color: #9ca3af;\n  }\n  \n  .clear-button,\n  .voice-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2rem;\n    height: 2rem;\n    border: none;\n    background: none;\n    border-radius: 6px;\n    cursor: pointer;\n    color: #6b7280;\n    transition: all 0.2s ease;\n    margin-left: 0.5rem;\n  }\n  \n  .clear-button:hover,\n  .voice-button:hover {\n    background: #f3f4f6;\n    color: #374151;\n  }\n  \n  .clear-button svg,\n  .voice-button svg {\n    width: 1rem;\n    height: 1rem;\n  }\n  \n  .voice-button.listening {\n    background: #fef2f2;\n    color: #dc2626;\n    animation: pulse 1.5s infinite;\n  }\n  \n  .search-loading {\n    margin-left: 0.5rem;\n  }\n  \n  .search-spinner {\n    width: 1rem;\n    height: 1rem;\n    border: 2px solid #e5e7eb;\n    border-top: 2px solid #2563eb;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  /* Quick filters */\n  .quick-filters {\n    margin-bottom: 1rem;\n  }\n  \n  .filter-scroll {\n    display: flex;\n    gap: 0.5rem;\n    overflow-x: auto;\n    padding: 0.25rem 0;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n  }\n  \n  .filter-scroll::-webkit-scrollbar {\n    display: none;\n  }\n  \n  .filter-chip {\n    display: flex;\n    align-items: center;\n    padding: 0.5rem 1rem;\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    border-radius: 20px;\n    font-size: 0.875rem;\n    font-weight: 500;\n    color: #374151;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    white-space: nowrap;\n    min-height: 44px; /* Argentina mobile optimization */\n  }\n  \n  .filter-chip:hover {\n    background: #f3f4f6;\n    border-color: #d1d5db;\n  }\n  \n  .filter-chip.active {\n    background: #2563eb;\n    color: #ffffff;\n    border-color: #2563eb;\n  }\n  \n  /* Search results */\n  .search-results {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    right: 0;\n    z-index: 50;\n    background: #ffffff;\n    border: 1px solid #e5e7eb;\n    border-radius: 12px;\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n    max-height: 400px;\n    overflow-y: auto;\n  }\n  \n  .search-result {\n    display: flex;\n    align-items: flex-start;\n    padding: 1rem;\n    border-bottom: 1px solid #f3f4f6;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    min-height: 60px;\n  }\n  \n  .search-result:last-child {\n    border-bottom: none;\n  }\n  \n  .search-result:hover,\n  .search-result.selected {\n    background: #f8fafc;\n  }\n  \n  .search-result.promoted {\n    background: linear-gradient(135deg, #fef3c7 0%, #fef9e7 100%);\n    border-left: 3px solid #f59e0b;\n  }\n  \n  .result-icon {\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n  }\n  \n  .result-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    object-fit: cover;\n  }\n  \n  .result-emoji {\n    width: 48px;\n    height: 48px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: #f3f4f6;\n    border-radius: 50%;\n    font-size: 1.5rem;\n  }\n  \n  .result-content {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  .result-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 0.25rem;\n  }\n  \n  .result-title {\n    font-size: 1rem;\n    font-weight: 600;\n    color: #111827;\n    margin: 0;\n    display: flex;\n    align-items: center;\n  }\n  \n  .verified-badge {\n    width: 1rem;\n    height: 1rem;\n    color: #10b981;\n    margin-left: 0.25rem;\n  }\n  \n  .result-rating {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n  }\n  \n  .rating-value {\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: #374151;\n  }\n  \n  .rating-star {\n    width: 1rem;\n    height: 1rem;\n    color: #fbbf24;\n  }\n  \n  .result-subtitle {\n    font-size: 0.875rem;\n    color: #6b7280;\n    margin: 0 0 0.25rem 0;\n  }\n  \n  .result-description {\n    font-size: 0.875rem;\n    color: #6b7280;\n    margin: 0 0 0.5rem 0;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  \n  .result-meta {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    flex-wrap: wrap;\n  }\n  \n  .result-price {\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: #059669;\n  }\n  \n  .result-distance {\n    font-size: 0.75rem;\n    color: #6b7280;\n  }\n  \n  .result-availability {\n    font-size: 0.75rem;\n    padding: 0.125rem 0.5rem;\n    border-radius: 12px;\n    font-weight: 500;\n  }\n  \n  .availability-available {\n    background: #d1fae5;\n    color: #065f46;\n  }\n  \n  .availability-busy {\n    background: #fef3c7;\n    color: #92400e;\n  }\n  \n  .availability-offline {\n    background: #fee2e2;\n    color: #991b1b;\n  }\n  \n  /* Loading skeletons */\n  .result-skeleton {\n    display: flex;\n    align-items: flex-start;\n    padding: 1rem;\n    border-bottom: 1px solid #f3f4f6;\n  }\n  \n  .skeleton {\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: skeleton-pulse 1.5s infinite;\n    border-radius: 4px;\n  }\n  \n  .skeleton-avatar {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n  }\n  \n  .skeleton-content {\n    flex: 1;\n  }\n  \n  .skeleton-title {\n    height: 1rem;\n    width: 60%;\n    margin-bottom: 0.5rem;\n  }\n  \n  .skeleton-subtitle {\n    height: 0.875rem;\n    width: 40%;\n    margin-bottom: 0.5rem;\n  }\n  \n  .skeleton-meta {\n    height: 0.75rem;\n    width: 80%;\n  }\n  \n  /* No results */\n  .no-results {\n    text-align: center;\n    padding: 3rem 2rem;\n  }\n  \n  .no-results-icon {\n    font-size: 3rem;\n    margin-bottom: 1rem;\n    opacity: 0.5;\n  }\n  \n  .no-results-title {\n    font-size: 1.125rem;\n    font-weight: 600;\n    color: #111827;\n    margin: 0 0 0.5rem 0;\n  }\n  \n  .no-results-message {\n    color: #6b7280;\n    margin: 0;\n    line-height: 1.5;\n  }\n  \n  /* Mobile optimizations for Argentina */\n  @media (max-width: 640px) {\n    .search-input-wrapper {\n      padding: 1rem;\n    }\n    \n    .search-input {\n      font-size: 16px; /* Prevent zoom on iOS */\n    }\n    \n    .search-results {\n      border-radius: 0;\n      border-left: none;\n      border-right: none;\n      max-height: 60vh;\n    }\n    \n    .result-meta {\n      flex-direction: column;\n      align-items: flex-start;\n      gap: 0.25rem;\n    }\n    \n    .filter-scroll {\n      padding-left: 1rem;\n      padding-right: 1rem;\n      margin-left: -1rem;\n      margin-right: -1rem;\n    }\n  }\n  \n  /* Animations */\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n  \n  @keyframes pulse {\n    0%, 100% {\n      opacity: 1;\n    }\n    50% {\n      opacity: 0.5;\n    }\n  }\n  \n  @keyframes skeleton-pulse {\n    0% {\n      background-position: -200% 0;\n    }\n    100% {\n      background-position: 200% 0;\n    }\n  }\n  \n  /* Accessibility */\n  @media (prefers-reduced-motion: reduce) {\n    .search-input-wrapper {\n      transition: none;\n    }\n    \n    .search-result {\n      transition: none;\n    }\n    \n    .search-spinner {\n      animation: none;\n      border-top-color: #2563eb;\n    }\n    \n    .skeleton {\n      animation: none;\n      background: #f0f0f0;\n    }\n    \n    .voice-button.listening {\n      animation: none;\n    }\n  }\n  \n  /* High contrast mode */\n  @media (prefers-contrast: high) {\n    .search-input-wrapper {\n      border-color: #000;\n    }\n    \n    .search-input-wrapper:focus-within {\n      border-color: #000;\n      box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.2);\n    }\n    \n    .filter-chip {\n      border-color: #000;\n    }\n    \n    .filter-chip.active {\n      background: #000;\n      border-color: #000;\n    }\n  }\n</style>"